from sympy import symbols,pprint,Pow
print("Enter three numbers p,q & r to generate the sequence as follow \n f(n)= p*f(n-1) + q*f(n-2) + r*f(n-3) \n 4th term in Seq = p x 3rd term in Seq + q x 2nd term in Seq + r x 1st term in Seq")
p=float(input(" p = "))
q=float(input(" q = "))
r=float(input(" r = "))
n=int(input("\nEnter the no.of terms to be generated \n n = "))
f1=int(input("\nEnter the first three numbers in the sequence \n f(1) = "))
f2=int(input(" f(2) = "))
f3=int(input(" f(3) = "))
f0=(f3-f2*p-f1*q)/r
P=((p**3)/27)+((p*q)/6)+(r/2)
Q=-(p**2/9)-(q/3)
R=(P**2+Q**3)**(1/2)
M=(-1-((-1)**(1/2))*(3**(1/2)))/2
W=(-1+((-1)**(1/2))*(3**(1/2)))/2
Alpha=(P-R)**(1/3)+(P+R)**(1/3)+(p/3)
print("\nThe following three ratios are obtained by the Cubic formula")
print("Alpha = %s"%(Alpha))
Beta=M*((P-R)**(1/3))+W*((P+R)**(1/3))+(p/3)
print("Beta = %s"%(Beta))
Gamma=W*((P-R)**(1/3))+M*((P+R)**(1/3))+(p/3)
print("Gamma = %s"%(Gamma))
print("\nThe first %s numbers of sequence created using the above ratios are"%n)
for i in range(1,n+1):
  N=(((Alpha**(i))*(f0*Beta*Gamma-(f1*(Beta+Gamma))+f2))/((Alpha-Beta)*(Alpha-Gamma)))+(((Beta**(i))*(f0*Alpha*Gamma-(f1*(Alpha+Gamma))+f2))/((Beta-Alpha)*(Beta-Gamma)))+(((Gamma**(i))*(f0*Alpha*Beta-(f1*(Alpha+Beta))+f2))/((Gamma-Alpha)*(Gamma-Beta)))
  print("%s rounded off to "%N,end="")
  print(round(N.real))
print("\nThe above sequence is generated by the formula")
Alpha, Beta, Gamma, f0, f1, f2, n = symbols('(Alpha) (Beta) (Gamma) f(0) f(1) f(2) n', integer=True)
pprint(((Pow(Alpha,n)*(f0*Beta*Gamma-f1*(Beta+Gamma)+f2))/((Alpha-Beta)*(Alpha-Gamma)))+((Pow(Beta,n)*(f0*Alpha*Gamma-f1*(Alpha+Gamma)+f2))/((Beta-Alpha)*(Beta-Gamma)))+((Pow(Gamma,n)*(f0*Alpha*Beta-f1*(Alpha+Beta)+f2))/((Gamma-Alpha)*(Gamma-Beta))))
print(" Where f(0)->Zeroth num in seq")
